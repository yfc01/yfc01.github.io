<style>
    .folder-title {
        cursor: pointer;
        font-size: 1.2em;
        /* æ–‡ä»¶å¤¹æ ‡é¢˜å­—ä½“å¤§å° */
        margin: 10px 0;
        /* ä¸Šä¸‹é—´è· */
        transition: color 0.3s;
        /* é¢œè‰²è¿‡æ¸¡æ•ˆæœ */
    }

    ul {
        list-style-type: none;
        /* å»æ‰æ‰€æœ‰åˆ—è¡¨é¡¹çš„æ ‡è®° */
        padding: 0;
        /* å»æ‰é»˜è®¤çš„å†…è¾¹è· */
        margin: 0;
        /* å»æ‰é»˜è®¤çš„å¤–è¾¹è· */
    }

    .sub-directory {
        padding-left: 20px;
        /* å­ç›®å½•ç¼©è¿› */
        max-height: 0;
        /* åˆå§‹é«˜åº¦ä¸º0ï¼Œéšè—å†…å®¹ */
        overflow: hidden;
        /* éšè—æº¢å‡ºå†…å®¹ */
        /* transition: max-height 0.3s ease; */
        /* æ·»åŠ è¿‡æ¸¡æ•ˆæœ */
    }

    .sub-directory.visible {
        max-height: 100vh;
        /* è®¾ç½®ä¸€ä¸ªåˆç†çš„æœ€å¤§é«˜åº¦ï¼Œç¡®ä¿å†…å®¹èƒ½å®Œå…¨æ˜¾ç¤º */
    }

    .sub-directory a {
        display: block;
        /* ä½¿é“¾æ¥å æ»¡æ•´è¡Œ */
        padding: 8px 0;
        /* ä¸Šä¸‹é—´è· */
        font-size: 1em;
        /* æ–‡ç« æ ‡é¢˜å­—ä½“å¤§å° */
        text-decoration: none;
        /* å»æ‰ä¸‹åˆ’çº¿ */
        transition: background-color 0.3s;
        /* èƒŒæ™¯é¢œè‰²è¿‡æ¸¡æ•ˆæœ */
    }

    /* åº•éƒ¨åˆ†å‰²çº¿ */
    /* .directory-item {
        margin-bottom: 10px;
        border-bottom: 1px solid;
    }

    .directory-item li:last-child .directory-item {
        border-bottom: none;
    } */
</style>

<!-- partials/directory.html -->
{{ $pages := . }}

{{ if $pages }}
<ul style="padding-left: 20px;">
    {{- $folders := where . "IsSection" true }} <!-- è·å–æ‰€æœ‰æ–‡ä»¶å¤¹ -->
    {{- $posts := where . "IsSection" false }} <!-- è·å–æ‰€æœ‰æ–‡ç«  -->

    <!-- æ¸²æŸ“æ–‡ä»¶å¤¹ -->
    {{ range $folders }}
    <li>
        <div class="directory-item">
            <div class="folder-title" onclick="toggleVisibility(this)">ğŸ—‚ï¸ {{ .Title }}</div>
            <ul class="sub-directory">
                {{ if .Pages }} <!-- å¦‚æœæ˜¯ Sectionï¼Œé€’å½’æ¸²æŸ“å…¶å­é¡µé¢ -->
                {{ partial "directory_structure.html" .Pages }}
                {{ end }}
            </ul>
        </div>
    </li>
    {{ end }}

    <!-- æ¸²æŸ“æ–‡ç«  -->
    {{ range $posts }}
    <li>
        <div class="directory-item">
            <a href="{{ .RelPermalink }}">ğŸ“ƒ {{ .Title }}</a>
        </div>
    </li>
    {{ end }}
</ul>
{{ end }}

<script>
    function toggleVisibility(element) {
        const subDirectory = element.nextElementSibling; // è·å–ä¸‹ä¸€ä¸ªå…„å¼Ÿå…ƒç´ 
        if (subDirectory) {
            // åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€
            subDirectory.classList.toggle("visible"); // åˆ‡æ¢å¯è§æ€§ç±»
        }
    }
</script>