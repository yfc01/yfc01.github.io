---
title: "TPS325M5芯片" #标题
date: 2024-10-08T00:27:36+08:00 #创建时间
lastmod: 2024-10-08T00:27:36+08:00 #更新时间
author: ["yfc01"] #作者
categories: 
- embedded
tags: 
- TPS325M5
description: "使用3peak的TPS325M5的一些经历" #描述
weight: # 输入1可以顶置文章，用来给文章展示排序，不填就默认按时间排序
slug: "TPS325M5 chip"
draft: false # 是否为草稿
comments: true #是否展示评论
showToc: true # 显示目录
TocOpen: true # 自动展开目录
hidemeta: false # 是否隐藏文章的元信息，如发布日期、作者等
disableShare: true # 底部不显示分享栏
showbreadcrumbs: false #顶部显示当前路径
cover:
    image: "" #图片路径：posts/tech/文章1/picture.png
    caption: "" #图片底部描述
    alt: ""
    relative: falsew
---

## 对嵌入式开发的学习

最初，我萌生了学习嵌入式开发的想法，一方面是为了拓展自己的知识面，另一方面是由于我对电子产品的浓厚兴趣。于是，我在哔哩哔哩找到了江协科技的C51单片机入门教程 <a href="https://www.bilibili.com/video/BV1Mb411e7re/" target="_blank"> 51单片机入门教程-2020版 程序全程纯手打 从零开始入门_哔哩哔哩_bilibili</a>，并自己购买了与教程中相同的开发板，跟着教程一步步学习。C51芯片的使用并不困难，重点在于理解单片机与各种外设通信时电路的变化。通过在程序中控制单片机的各个寄存器，我能够实现对外设的控制。

C51的学习进展顺利，使我对嵌入式开发有了一定的认识和操作经验。于是，我决定继续深入学习当前主流的嵌入式芯片架构——ARM架构的单片机。

## 为什么选择TPS325M5芯片

在转向ARM架构的学习时，我最初是打算继续跟随江协科技的嵌入式系列视频，并购买相应的开发工具。然而，在与朋友WT交流时，他告诉我他手里有一块ARM架构的开发板可以借给我用来学习。我当时感到疑惑，因为这块芯片的资料并不多，而且与主流的STM32芯片也有所不同。WT告诉我，这块芯片的使用思路与STM32芯片类似，学会了STM32的开发流程，就可以应用在这块芯片上。于是，我决定接受这个挑战。

我拿到的这块芯片型号是TPS325M5177QFSD。通过WT提供的3PEAK官网 <a href="https://www.3peak.cn/" target="_blank">3PEAK - Analog Chips and Embedded Processors, Semiconductor Company</a> 查询，我了解到它是一款基于ARM® v8-M架构的芯片。我决定按照学习STM32芯片的思路进行迁移，并参考江协科技的STM32入门教程 <a href="https://www.bilibili.com/video/BV1th411z7sn" target="_blank">STM32入门教程-2023版 细致讲解 中文字幕_哔哩哔哩_bilibili</a> 继续学习。

## 如何点亮第一个LED

要启动一个开发项目的第一步是安装对应的支持包。但我手中的TPS325M5芯片和教程中的芯片并不完全相同，因此遇到了一些困难。我习惯性地找WT寻求帮助，他告诉我应该到官网自行查找支持包。于是，我在3PEAK官网上费了一些时间查找适合我这款芯片的支持包并安装了环境。

接下来，我开始尝试搭建项目，但3PEAK提供的SDK与我之前熟悉的开发流程大不相同，令我无从下手。我再次向WT请教，他建议我使用官方的GPIO例程进行开发，而不必纠结于重新配置一个项目。于是，我通过运行官方例程的方式，成功搭建了我的第一个ARM项目。

搭建完项目后，我想尝试烧录程序，但由于没有仿真器，只好借用了STLink。然而，烧录过程中出现了各种报错，包括无法检测到单片机或无法正常烧录等问题。经过多次远程联机尝试，问题依然没有解决。最终，我决定购买DAPLink，虽然等待两天半的时间让我倍感焦虑，但DAPLink到货后一次性烧录成功，终于结束了这段“鬼打墙”般的艰难历程。

点亮GPIO的流程其实很简单：

1. 配置时钟
2. 初始化引脚
3. 让引脚输出高电平

虽然步骤简单，但由于教程中的函数调用和实际代码差异较大，最初让我感到非常困惑。多次犯难时，我会求助WT，他通过远程连接帮助我修改例程，成功点亮了第一个LED灯。我也从中学到了利用好官方开发工具的重要性。

## 学习更多外设

在点亮LED灯之后，我按照相同的思路继续学习ARM架构芯片的其他功能模块，包括定时器、中断等。学习中，我使用了许多工具，比如官方提供的用户手册、数据手册、Keil的调试功能以及串口调试助手。

在学习过程中，虽然遇到了一些困难，但我逐渐适应了这种不断摸索与解决问题的节奏。面对新的问题，我更愿意尝试各种方法，验证自己的思路是否正确。就像在《认知觉醒》一书中提到的，学习应该保持在拉伸区，才能最快速地掌握新知识。

## 毕设项目

在国庆节前，我决定使用WT提供的这块开发板来完成我的毕业设计。因此，我重新拿出开发板继续深入学习。在国庆期间，我完成了串口初始化程序的封装、虚拟按键的控制以及FreeRTOS系统的移植。在成功打通所有需要的外设后，我着手实现项目的业务逻辑。

在移植FreeRTOS系统时，由于官网并没有提供相关例程，我查阅了大量资料并耗费了不少时间。移植过程中还遇到了Keil调试环境下程序运行效果与单片机上运行效果不一致的问题。最终，我发现是由于FreeRTOS在任务空闲时自动进入低功耗模式，导致程序出现异常。调整配置后，问题得以解决。

